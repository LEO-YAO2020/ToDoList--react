{"version":3,"sources":["view/about.js","store/reducer.js","store/index.js","view/Todo.js","view/todoid.js","App.js","index.js"],"names":["About","props","state","Component","defaultState","Description","Category","Content","list","d","store","createStore","action","type","newState","JSON","parse","stringify","value","newState2","newState5","newState3","states","push","newState4","arr","newArr","k","filter","item","console","log","newState6","splice","window","__REDUX_DEVTOOLS_EXTENSION__","Todo","getState","storeChange","bind","subscribe","className","onChange","this","changeDescription","changeCategory","name","changeContent","onClick","dispatch","document","querySelector","selected","checkbox","querySelectorAll","i","length","checked","id","map","index","to","setState","fir","all","onclick","flag","j","e","target","todoItem","clickBack","history","go","stores","match","params","App","path","component","exact","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.5969ad76.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport './about.css'\r\n\r\nclass About extends Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state={}\r\n    }\r\n    render() {\r\n        return(\r\n            <h2>about works!</h2>\r\n        )\r\n    }\r\n}\r\nexport default About\r\n","const defaultState = {\r\n  Description: \"\",\r\n  Category: \"\",\r\n  Content: \"\",\r\n  list: [],\r\n  d: \"delete\",\r\n};\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case \"changeDescription\":\r\n      let newState = JSON.parse(JSON.stringify(state));\r\n      newState.Description = action.value;\r\n      return newState;\r\n    case \"changeCategory\":\r\n      let newState2 = JSON.parse(JSON.stringify(state));\r\n      newState2.Category = action.value;\r\n      return newState2;\r\n    case \"changeContent\":\r\n      let newState5 = JSON.parse(JSON.stringify(state));\r\n      newState5.Content = action.value;\r\n      return newState5;\r\n    case \"addList\":\r\n      let newState3 = JSON.parse(JSON.stringify(state));\r\n      let states = {\r\n        Description: newState3.Description,\r\n        Category: newState3.Category,\r\n        Content: newState3.Content,\r\n      };\r\n      newState3.list.push(states);\r\n      newState3.Description = \"\";\r\n      newState3.Category = \"\";\r\n      newState3.Content = \"\";\r\n      return newState3;\r\n    case \"deleteItem\":\r\n      let newState4 = JSON.parse(JSON.stringify(state));\r\n      let arr = action.value;\r\n\r\n      /**\r\n       * splice 并不是一个纯函数，它会修改数组，返回被删除的元素。所以删除的bug并不是因为什么异步的原因，而是因为没有搞清楚splice的行为\r\n       * 假如有一个数组：【1,2,3,4];要删除第3，4个元素，arr=[2,3]，按你这里的写法\r\n       * 第一次循环 i = 0; [1,2,3,4].splice(arr[0],1); 原数组变成 [1,2,4];\r\n       * 第二次循环 i = 1; [1,2,4].splice(arr[1],1); arr[1] === 3, 数组此时根本没有第三个元素，所以不会有任何变化\r\n       */\r\n      let newArr = newState4.list;\r\n      for (let k of arr) {\r\n        // const index = Array.prototype.findIndex(newState4.list,item=>item)\r\n\r\n        newArr = newArr.filter(\r\n          (item) => item.Description != newState4.list[k].Description\r\n        );\r\n        console.log(newArr);\r\n      }\r\n      newState4.list = newArr;\r\n      return newState4;\r\n    case \"deleteOne\":\r\n      let newState6 = JSON.parse(JSON.stringify(state));\r\n      newState6.list.splice(action.value, 1);\r\n      return newState6;\r\n  }\r\n  return state;\r\n};\r\n","import {createStore} from \"redux\";\r\nimport reducer from \"./reducer\";\r\nconst store = createStore(\r\n    reducer,\r\n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n)\r\nexport default store\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport store from \"../store/index\";\r\nimport \"./todo.css\";\r\n\r\nclass Todo extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = store.getState();\r\n    this.storeChange = this.storeChange.bind(this);\r\n    store.subscribe(this.storeChange);\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"main\">\r\n        <div className=\"form\">\r\n          <table>\r\n            <tbody>\r\n              <tr>\r\n                <td>Description:</td>\r\n                <td>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"des\"\r\n                    onChange={this.changeDescription.bind(this)}\r\n                  />\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td>Category: </td>\r\n                <td>\r\n                  <select\r\n                    className=\"sel\"\r\n                    onChange={this.changeCategory.bind(this)}\r\n                  >\r\n                    <option className=\"firstOption\"> </option>\r\n                    <option>html</option>\r\n                    <option>css</option>\r\n                    <option>js</option>\r\n                  </select>\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td>Content:</td>\r\n                <td>\r\n                  <textarea\r\n                    name=\"cont\"\r\n                    className=\"content\"\r\n                    onChange={this.changeContent.bind(this)}\r\n                  />\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td>\r\n                  <button\r\n                    onClick={() => {\r\n                      const action = {\r\n                        type: \"addList\",\r\n                      };\r\n                      store.dispatch(action);\r\n                      var Description = document.querySelector(\".des\");\r\n                      var Category = document.querySelector(\".firstOption\");\r\n                      var Content = document.querySelector(\".content\");\r\n                      Description.value = \"\";\r\n                      Category.selected = true;\r\n                      Content.value = \"\";\r\n                    }}\r\n                  >\r\n                    Submit\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"todo\">\r\n          <button\r\n            onClick={() => {\r\n              var checkbox = document.querySelectorAll(\".checkBox\");\r\n              var arr = [];\r\n\r\n              for (let i = 0; i < checkbox.length; i++) {\r\n                if (checkbox[i].checked) {\r\n                  arr.push(i);\r\n                  checkbox[i].checked = false;\r\n                }\r\n              }\r\n              let action = {\r\n                type: \"deleteItem\",\r\n                value: arr,\r\n              };\r\n              store.dispatch(action);\r\n            }}\r\n          >\r\n            Delete Selected\r\n          </button>\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <td>\r\n                  <input type=\"checkbox\" id=\"cball\" />\r\n                </td>\r\n                <th>Description</th>\r\n                <th>Category</th>\r\n                <th>Operate</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.state.list.map((item, index) => {\r\n                return (\r\n                  <tr key={index}>\r\n                    <td>\r\n                      <input type=\"checkbox\" className=\"checkBox\" />\r\n                    </td>\r\n                    <th>\r\n                      <Link to={\"/list/\" + index}>{item.Description}</Link>\r\n                    </th>\r\n                    <th>{item.Category}</th>\r\n                    <th>\r\n                      <span\r\n                        onClick={(index) => {\r\n                          const action = {\r\n                            type: \"deleteOne\",\r\n                            value: index,\r\n                          };\r\n                          store.dispatch(action);\r\n                        }}\r\n                      >\r\n                        {this.state.d}\r\n                      </span>\r\n                    </th>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  storeChange() {\r\n    this.setState(store.getState());\r\n  }\r\n\r\n  /**\r\n   * 这里的2个事件绑定直接用react的方式写在JSX的标签上就可以了,否则需要考虑如何清理这些事件处理函数\r\n   * all[i].onclick, 当all[i]元素被删除时，需要all[i].onclick = null 解绑事件，垃圾回收才能将原来的\r\n   * 事件处理函数回收，释放内存。\r\n   * 当然这些并不影响效果的实现。\r\n   */\r\n  componentDidUpdate() {\r\n    var fir = document.querySelector(\"#cball\");\r\n    var all = document.querySelectorAll(\".checkBox\");\r\n    fir.onclick = function () {\r\n      for (let i = 0; i < all.length; i++) {\r\n        all[i].checked = this.checked;\r\n      }\r\n    };\r\n    for (let i = 0; i < all.length; i++) {\r\n      all[i].onclick = function () {\r\n        var flag = true;\r\n        for (let j = 0; j < all.length; j++) {\r\n          if (!all[j].checked) {\r\n            flag = false;\r\n          }\r\n        }\r\n        fir.checked = flag;\r\n      };\r\n    }\r\n  }\r\n\r\n  changeDescription(e) {\r\n    const action = {\r\n      type: \"changeDescription\",\r\n      value: e.target.value,\r\n    };\r\n    store.dispatch(action);\r\n  }\r\n  changeCategory(e) {\r\n    console.log(e.target.value);\r\n    const action = {\r\n      type: \"changeCategory\",\r\n      value: e.target.value,\r\n    };\r\n    store.dispatch(action);\r\n  }\r\n  changeContent(e) {\r\n    const action = {\r\n      type: \"changeContent\",\r\n      value: e.target.value,\r\n    };\r\n    store.dispatch(action);\r\n  }\r\n}\r\nexport default Todo;\r\n","import React, { Component } from \"react\";\r\nimport store from \"../store/index\";\r\nimport \"./todoid.css\";\r\n\r\nclass todoItem extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      stores: store.getState(),\r\n      id: 0,\r\n    };\r\n    this.storeChange = this.storeChange.bind(this);\r\n    store.subscribe(this.storeChange);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"list\">\r\n          <h3>Description: </h3>\r\n          <span>{this.state.stores.list[this.state.id].Description}</span>\r\n          <br />\r\n          <h3>Category: &nbsp;&nbsp;</h3>\r\n          <span>{this.state.stores.list[this.state.id].Category}</span>\r\n          <br />\r\n          <h3>Content: &nbsp;&nbsp;</h3>\r\n          <span>{this.state.stores.list[this.state.id].Content}</span>\r\n          <br />\r\n        </div>\r\n        <div>\r\n          <button onClick={this.clickBack}>Back</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  clickBack = () => {\r\n    window.history.go(-1);\r\n  };\r\n  componentDidMount() {\r\n    let id = this.props.match.params.id;\r\n    this.setState({ id: id });\r\n  }\r\n  storeChange() {\r\n    this.setState(store.getState());\r\n  }\r\n}\r\n\r\nexport default todoItem;\r\n","import React, {Component}from 'react'\r\nimport {BrowserRouter as Router,Route,Link} from \"react-router-dom\";\r\nimport './index.css'\r\nimport About from './view/about'\r\nimport Todo from './view/Todo'\r\nimport todoItem from './view/todoid'\r\nfunction App() {\r\n    return(\r\n        <Router>\r\n            <div className='head'>\r\n                <ul>\r\n                    <li><Link to=\"/todo\">todo</Link></li>\r\n                    <li><Link to=\"/about\">about</Link></li>\r\n                </ul>\r\n            </div>\r\n            <div>\r\n                <Route path=\"/about\" component={About}/>\r\n                <Route path=\"/todo\"  component={Todo}/>\r\n                <Route path=\"/list/:id\" exact component={todoItem}/>\r\n            </div>\r\n        </Router>\r\n    )\r\n}\r\nexport default App\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}